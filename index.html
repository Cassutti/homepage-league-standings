<script>
  async function getTable() {
    try {
      const res = await fetch('https://www.thesportsdb.com/api/v1/json/123/lookuptable.php?l=4397&s=2024-2025');
      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
      const data = await res.json();
      const table = data.table || []; // grab full table without slicing
      const tbody = document.querySelector("#leagueTable tbody");

      if (table.length === 0) {
        tbody.innerHTML = '<tr><td colspan="3">No data available.</td></tr>';
        return;
      }

      tbody.innerHTML = "";

      table.forEach(team => {
        tbody.innerHTML += `<tr>
          <td>${team.strTeam}</td>
          <td>${team.intPlayed}</td>
          <td>${team.intPoints}</td>
        </tr>`;
      });
    } catch (err) {
      const tbody = document.querySelector("#leagueTable tbody");
      tbody.innerHTML = '<tr><td colspan="3">⚠️ Failed to load table.</td></tr>';
      console.error('Fetch error:', err);
    }
  }

  getTable();
  setInterval(getTable, 15 * 60 * 1000);
</script>
